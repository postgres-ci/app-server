{% extends "internal/layout.html" %} 

{% block content_header%}
<h1>Dashboard</h1> 
{% endblock %}
<ol class="breadcrumb">
{% block breadcrumb%}
<li><i class="fa fa-dashboard"></i> Home</li>
{% endblock %}

{% block content%} 
{% verbatim %} 
<div class="box">
    <div class="box-header">
        <h3 class="box-title">Projects</h3>
    </div>
    <div class="box-body no-padding">
        <table class="table table-striped">
            <tbody>
                <tr>
                    <th>Project</th>
                    <th>Owner</th>
                    <th width="350px">Last build</th>
                </tr>
                {% for item in items %}
                <tr>
                    <td>
                        <a href="/projects/{{ item.ProjectID }}/">{{ item.ProjectName }}</a> <br>
                        {{ item.ProjectToken }}
                    </td>
                    <td>
                        {{ item.UserName }}
                    </td>
                    <td>


                    {% if item.Status == "success" %}
                    <span class="label label-success">
                    {% elif item.Status == "pending" %}
                    <span class="label label-warning">
                    {% elif item.Status == "failed" %}
                    <span class="label label-danger">
                    {% else %}
                    <span class="label label-primary">
                    {% endif %}
                    {{ item.Status }}</span>

                    {% if item.LastBuildID %}
                        (<a href="/projects/{{ item.ProjectID }}/build/{{ item.LastBuildID }}/">{{ item.CommitSHA | truncatechars:15 }}</a>)
                        
                        {% if !item.FinishedAt.IsZero() %}
                        {{ item.FinishedAt | timesince }}
                        {% else %}
                        {{ item.StartedAt | timesince }}
                        {% endif %}
                    {% endif %}
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% if CurrentUser.IsSuperuser %}
    <div class="box-footer">
        <button type="submit" class="btn btn-primary">Add project</button>
    </div>
    {% endif %}
</div>
{% endverbatim %} 
{% endblock %}
